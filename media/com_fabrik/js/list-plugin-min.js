/*! Fabrik */
var FbListPlugin=my.Class({options:{requireChecked:!0,canAJAX:!0,ref:""},constructor:function(a){if(this.options=$.extend(this.options,a),this.result=!0,void 0!==this.getList()){if("function"==typeof this.getList().getForm){this.listform=this.getList().getForm();var b=this.listform.find("input[name=listid]");if(0===b.length)return;this.listid=b.value}else this.listform=this.getList().container.find("form");this.watchButton()}},getList:function(){return void 0===Fabrik.blocks["list_"+this.options.ref]?void 0:Fabrik.blocks["list_"+this.options.ref]},getRowId:function(a){return a.hasClass("fabrik_row")||(a=a.closest(".fabrik_row")),a[0].id.split("_").pop()},clearFilter:Function.from(),watchButton:function(){void 0!==this.options.name&&$(document).on("click","."+this.options.name,function(a){if(!a.rightClick&&(a.stopPropagation(),a.preventDefault(),$(this).data("list")===this.list.options.listRef)){var b,c;$(this).closest(".fabrik_row")&&(b=$(this).closest(".fabrik_row"),b.find("input[name^=ids]")&&(c=b.find("input[name^=ids]"),this.listform.find("input[name^=ids]").prop("checked",!1),c.prop("checked",!0)));var d=!1;if(this.listform.find("input[name^=ids]").each(function(){this.checked&&(d=!0)}),!d&&this.options.requireChecked)return void window.alert(Joomla.JText._("COM_FABRIK_PLEASE_SELECT_A_ROW"));var e=this.options.name.split("-");this.listform.find("input[name=fabrik_listplugin_name]").val(e[0]),this.listform.find("input[name=fabrik_listplugin_renderOrder]").val(e.getLast()),this.buttonAction()}}.bind(this))},buttonAction:function(){var a=this.options.canAJAX?"list.doPlugin":"list.doPlugin.noAJAX";this.list.submit(a)}});