/*! Fabrik */
var FbNotes=my.Class(FbElement,{options:{rowid:0,id:0},constructor:function(a,b){this.plugin="notes",FbNotes.Super.call(this,a,b),this.setUp()},setUp:function(){var a=this,b=this.element.find("div");0!==this.options.rowid&&(this.element.find(".button").on("click",function(b){a.submit(b)}),this.field=this.element.find(".fabrikinput"),b.makeResizable({modifiers:{x:!1,y:"height"},handle:this.element.find(".noteHandle")}),this.element.find(".noteHandle").css("cursor","all-scroll"))},submit:function(a){a.stopPropagation();var b=this.field.val(),c=this;if(""!==b){Fabrik.loader.start(this.element);var d={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"notes",method:"ajax_addNote",element_id:this.options.id,v:b,rowid:this.options.rowid,formid:this.form.id};this.myAjax=$.getJSON({url:"",data:d}).done(function(a){Fabrik.loader.stop(this.element);var b=c.element.find("div"),d=$(document.createElement("div")).addClass("row-fluid"),e=$(document.createElement("div")).addClass("span12").html(a.label).inject(d);e.inject(b),c.field.val("")}).fail(function(){Fabrik.loader.stop(this.element)})}},cloned:function(a){Fabrik.trigger("fabrik.notes.update",this),this.parent(a)}});