/*! Fabrik */
var FbNotes=my.Class(FbElement,{options:{rowid:0,id:0},constructor:function(a,b){this.plugin="notes",FbNotes.Super.call(this,a,b),this.setUp()},setUp:function(){var a=this;if(0!==this.options.rowid){this.element.find(".button").on("click",function(b){a.submit(b)}),this.field=this.element.find(".fabrikinput");var b=this.element.find("div");b.makeResizable({modifiers:{x:!1,y:"height"},handle:this.element.find(".noteHandle")}),this.element.find(".noteHandle").css("cursor","all-scroll")}},submit:function(a){a.stopPropagation();var b=this.field.get("value");if(""!==b){Fabrik.loader.start(this.element);var c={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"notes",method:"ajax_addNote",element_id:this.options.id,v:b,rowid:this.options.rowid,formid:this.form.id};this.myAjax=new Request.JSON({url:"",data:c,onSuccess:function(a){Fabrik.loader.stop(this.element);var b=this.element.find("div"),c=$(document.createElement("div")).addClass("row-fluid"),d=$(document.createElement("div")).addClass("span12").html(a.label).inject(c);d.inject(b),this.field.value=""}.bind(this),onError:function(a){Fabrik.loader.stop(this.element),window.alert(a)},onFailure:function(){Fabrik.loader.stop(this.element),window.alert("ajax failed")},onCancel:function(){Fabrik.loader.stop(this.element)}}).send()}},cloned:function(a){Fabrik.trigger("fabrik.notes.update",this),this.parent(a)}});