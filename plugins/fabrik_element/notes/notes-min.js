var FbNotes=new Class({options:{rowid:0,id:0},Extends:FbElement,initialize:function(b,a){this.plugin="notes";this.parent(b,a);this.setUp()},setUp:function(){if(this.options.rowid!==0){this.element.getElement(".button").addEvent("click",function(b){this.submit(b)}.bind(this));this.field=this.element.getElement(".fabrikinput");var a=this.element.getElement("div");a.makeResizable({modifiers:{x:false,y:"height"},handle:this.element.getElement(".noteHandle")});this.element.getElement(".noteHandle").setStyle("cursor","all-scroll")}},submit:function(c){c.stop();var a=this.field.get("value");if(a!==""){Fabrik.loader.start(this.element);var b={option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"notes",method:"ajax_addNote",element_id:this.options.id,v:a,rowid:this.options.rowid,formid:this.form.id};this.myAjax=new Request.JSON({url:"",data:b,onSuccess:function(f){Fabrik.loader.stop(this.element);if(this.options.j3){var g=this.element.getElement("div");var h=new Element("div",{"class":"row-fluid"});var d=new Element("div",{"class":"span12"}).set("html",f.label).inject(h);d.inject(g)}else{var e=this.element.getElement("ul");var i="oddRow"+e.getElements("li").length%2;new Element("li",{"class":i}).set("html",f.label).inject(e)}this.field.value=""}.bind(this),onError:function(d){Fabrik.loader.stop(this.element);alert(d)},onFailure:function(d){Fabrik.loader.stop(this.element);alert("ajax failed")},onCancel:function(){Fabrik.loader.stop(this.element)}}).send()}},cloned:function(a){Fabrik.fireEvent("fabrik.notes.update",this);this.parent(a)}});