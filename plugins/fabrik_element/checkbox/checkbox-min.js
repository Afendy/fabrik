/*! Fabrik */
var FbCheckBox=my.Class(FbElementList,{type:"checkbox",constructor:function(a,b){this.plugin="fabrikcheckbox",FbCheckBox.Super.call(this,a,b),this._getSubElements()},watchAddToggle:function(){var a,b,c=this.getContainer(),d=c.find("div.addoption"),e=c.find(".toggle-addoption");this.mySlider&&(a=d.clone(),b=c.find(".fabrikElement"),d.parent().destroy(),b.adopt(a),d=c.find("div.addoption"),d.css("margin",0)),$(d).slideUp(500),e.on("click",function(a){a.stopPropagation(),$(d).slideToggle()})},getValue:function(){if(!this.options.editable)return this.options.value;var a=[];return this.options.editable?(this._getSubElements().each(function(b){b.checked&&a.push(b.get("value"))}),a):this.options.value},numChecked:function(){return this._getSubElements().filter(function(a){return a.checked}).length},update:function(a){var b=this;if(this.find(),"string"==typeof a&&(a=""===a?[]:JSON.decode(a)),!this.options.editable){if(this.element.html(""),""===a)return;return void jQuery.each(a,function(a,c){b.element.html(b.element.html()+b.options.data[c]+"<br />")})}this._getSubElements(),jQuery.each(this.subElements,function(b,c){var d=!1;jQuery.each(a,function(a,b){b===c.value&&(d=!0)}),c.checked=d})},cloned:function(a){this.options.allowadd===!0&&this.options.editable!==!1&&(this.watchAddToggle(),this.watchAdd()),FbCheckBox.Super.prototype.cloned(this,a)}});