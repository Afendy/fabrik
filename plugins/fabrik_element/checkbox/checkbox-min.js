/*! Fabrik */
FbCheckBox=my.Class(FbElementList,{type:"checkbox",constructor:function(a,b){this.plugin="fabrikcheckbox",this.parent(a,b),this._getSubElements()},watchAddToggle:function(){var a,b,c=this.getContainer(),d=this,e=c.find("div.addoption"),f=c.find(".toggle-addoption");this.mySlider&&(a=e.clone(),b=c.find(".fabrikElement"),e.parent().destroy(),b.adopt(a),e=c.find("div.addoption"),e.css("margin",0)),this.mySlider=new Fx.Slide(e,{duration:500}),this.mySlider.hide(),f.on("click",function(a){a.stop(),d.mySlider.toggle()})},getValue:function(){if(!this.options.editable)return this.options.value;var a=[];return this.options.editable?(this._getSubElements().each(function(b){b.checked&&a.push(b.get("value"))}),a):this.options.value},numChecked:function(){return this._getSubElements().filter(function(a){return a.checked}).length},update:function(a){var b=this;if(this.find(),"string"==typeof a&&(a=""===a?[]:JSON.decode(a)),!this.options.editable){if(this.element.html(""),""===a)return;return void jQuery.each(a,function(a,c){b.element.html(b.element.html()+b.options.data[c]+"<br />")})}this._getSubElements(),jQuery.each(this.subElements,function(b,c){var d=!1;jQuery.each(a,function(a,b){b===c.value&&(d=!0)}),c.checked=d})},cloned:function(a){this.options.allowadd===!0&&this.options.editable!==!1&&(this.watchAddToggle(),this.watchAdd()),this.parent(a)}});