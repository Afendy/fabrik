/*! Fabrik */
var FbRadio=my.Class(FbElementList,{options:{btnGroup:!0},type:"radio",constructor:function(a,b){this.plugin="fabrikradiobutton",FbRadio.Super.call(this,a,b),this.btnGroup()},btnGroup:function(){if(this.options.btnGroup){this.btnGroupRelay();var a=this.getContainer();a&&(a.find(".radio.btn-group label").addClass("btn"),a.find(".btn-group input[checked=checked]").each(function(a){var b,c=a.closest("label");0===c.length&&(c=a.getNext()),b=a.val(),c.addClass(""===b?"active btn-primary":"0"===b?"active btn-danger":"active btn-success")}))}},btnGroupRelay:function(){var a,b,c=this.getContainer(),d=this;c&&(c.find(".radio.btn-group label").addClass("btn"),c.on("click",".btn-group label",function(){a=$(this).prop("for"),b,""!==a&&(b=$("#"+a)),0===b.length&&(b=$(this).find("input")),d.setButtonGroupCSS(b)}))},setButtonGroupCSS:function(a){var b;""!==a.prop("id")&&(b=$("label[for="+a.id+"]")),0===b.length&&(b=a.closest("label.btn"));var c=a.val(),d=parseInt(a.data("fabchecked"),10);a.get("checked")&&1!==d||(b&&(b.closest(".btn-group").find("label").removeClass("active").removeClass("btn-success").removeClass("btn-danger").removeClass("btn-primary"),b.addClass(""===c?"active btn-primary":0===parseInt(c,10)?"active btn-danger":"active btn-success")),a.set("checked",!0),null===typeof d&&a.set("fabchecked",1))},watchAddToggle:function(){var a=this.getContainer(),b=a.find("div.addoption"),c=a.find(".toggle-addoption");if(this.mySlider){var d=b.clone(),e=a.find(".fabrikElement");b.parent().destroy(),e.append(d),b=a.find("div.addoption"),b.css("margin",0)}$(b).slideUp(500),this.mySlider.hide(),c.on("click",function(a){a.stopPropagation(),$(b).slideToggle()})},getValue:function(){if(!this.options.editable)return this.options.value;var a="";return this._getSubElements().each(function(b){return b.checked?a=b.get("value"):null}),a},setValue:function(a){this.options.editable&&this._getSubElements().each(function(b){b.value===a&&(b.checked="checked")})},update:function(a){if(!this.options.editable)return""===a?void this.element.html(""):void this.element.html(this.options.data[a]);var b=this._getSubElements();b.each("array"===$.isArray(a)?function(b){a.contains(b.value)&&this.setButtonGroupCSS(b)}.bind(this):function(b){b.value===a&&this.setButtonGroupCSS(b)}.bind(this))},cloned:function(a){this.options.allowadd===!0&&this.options.editable!==!1&&(this.watchAddToggle(),this.watchAdd()),FbRadio.Super.prototype.cloned(this,a),this.btnGroup()},getChangeEvent:function(){return this.options.changeEvent}});