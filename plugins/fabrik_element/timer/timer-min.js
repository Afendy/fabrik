/*! Fabrik */
var FbTimer=my.Class(FbElement,{options:{defaultVal:"",editable:!1,startCrono:"15:00",endCrono:"00:00",div:!1,stopOnComplete:!0,onComplete:function(){},onEveryMinute:function(){},onEveryHour:function(){}},constructor:function(a,b){var c=this;this.plugin="fabriktimer",this.parent(a,b);var d=$("#"+this.options.element+"_button");this.seg=0,this.min=0,this.hour=0,this.options.autostart===!0?(d.find("span").text(Joomla.JText._("PLG_ELEMENT_TIMER_STOP")),this.start()):this.state="paused",this.incremental=1,d.on("click",function(a){if(a.stop(),"started"===c.state)c.pause(),d.find("span").text(Joomla.JText._("PLG_ELEMENT_TIMER_START"));else{var b=this.element.val().split(":");switch(b.length){case 3:this.hour=""===b[0]?0:parseInt(b[0],10),this.min=""===b[1]?0:parseInt(b[1],10),this.seg=""===b[2]?0:parseInt(b[2],10);break;case 2:this.min=""===b[0]?0:parseInt(b[0],10),this.seg=""===b[1]?0:parseInt(b[1],10);break;case 1:this.seg=""===b[0]?0:parseInt(b[0],10)}c.start(),d.find("span").text(Joomla.JText._("PLG_ELEMENT_TIMER_STOP"))}})},start:function(){"started"!==this.state&&(this.timer=setInterval(function(){this.count.call(this)},1e3),this.state="started")},pause:function(){"paused"!==this.state&&(clearInterval(this.timer),this.state="paused")},count:function(){this.seg+=this.incremental,(-1===this.seg||60===this.seg)&&(this.seg=this.incremental>0?0:59,this.min+=this.incremental,(-1===this.min||60===this.min)&&(this.min=this.incremental>0?0:59,this.hour+=this.incremental)),this.element.value=this.time(),this.min===this.endMin&&this.seg===this.endSeg&&(this.trigger("onComplete",""),this.options.stopOnComplete&&this.pause())},time:function(){var a=this.hour<10?"0"+this.hour:this.hour;return a+=(this.min<10?":0":":")+this.min,a+=(this.seg<10?":0":":")+this.seg},reset:function(){start_array=this.options.startCrono.split(":"),end_array=this.options.endCrono.split(":"),this.startMin=start_array[0].toInt(),this.startSeg=start_array[1].toInt(),this.endMin=end_array[0].toInt(),this.endSeg=end_array[1].toInt(),this.incremental=this.endMin!==this.startMin?this.endMin>this.startMin?1:-1:this.endSeg>this.startSeg?1:-1,this.min=this.startMin,this.seg=this.startSeg,this.options.div!==!1&&$("#"+this.options.div).text(this.time())}});